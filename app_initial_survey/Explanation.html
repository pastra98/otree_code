{{ block title }}Welcome to the experiment{{ endblock }}

{{ block content }}

<p>
You are a citizen living in a city somewhere in the world.
The city wants to give engaged citizens like you the option to contribute to improving the city by notifying
city officials about all kinds of infrastructure related issues through a mobile app.
</p>

<p>
You're using this application today to report issues. Based on your contributions and
those of others, the city you live in will be able to work on your
reported issues. The better the reports are that you and your peers contribute, the
more the city improves.

We will simulate this application via a simple economic game.
</p>

<h3>The game</h3>

<p>
You will be placed in a group with 3 other classmates. Everyone of you receives
a certain amount of points which you can choose to spend to produce an issue report.
The focus here lies on the quality of the report, spending more points allows you
to produce a better report - think of these points as the effort you would put into
reporting a real-life issue in your city.

The rules for how this game works will be explained on the following page. You will
also be asked to answer 4 questions about the rules in order to proceed.
</p>

<h3>The rules</h3> <!-- THIS STUFF GOES INTO POPUP BOX -->

<p>
The game is played over 7 rounds. In each round you will first receive effort points
that you can spend on reports. You can decide to choose between reports that cost
0 to 4 effort points. Once everyone of your 3 group members has submitted a report:
</p>

<ol>
    <li>
        the <b>value of all your reports is summed up</b>. this is the total
        contribution of your group
    </li>
    <li>
        the total contribution is divided by 4, such that everyone gets to profit from
        all the reports submitted. Furthermore, the total contribution is increased by 50%,
        in order to reward participants for sharing their reports. This means that
        <b>the total points are multiplied by 1.5</b> before they are redistributed.
    </li>
</ol>

The effort points you receive at the end of the round thus depend on the overall
quality of reports in your group, as well as the effort points you chose to keep
for yourself. This is called your "payout", and this formula again shows how your
payout is calculated:

<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <p>
        $$\text{payout} = \text{Initial effort points} - \text{Your contribution} + \left( \frac{\text{total contributions in group}}{4} \right) \times 1.5$$
    </p>


<p>
The rules will be the same for everyone in your group. The effort points are
not carried over between rounds, every round is a clean slate where you
can only spend the effort points you are provided with. You have to decide how much
effort you want to put into your reports without communicating with others.
</p>

<script>
    function showNextQuestion(currentQnum) {
        var qList = [forminputs.q1.value, forminputs.q2.value, forminputs.q3.value];
        var selectedAnswer = parseInt(qList[currentQnum-1])
        var correctAnswer = {{ C.CORRECT_A }}[currentQnum-1];
        var currentDiv = document.getElementById("id_q" + currentQnum);
        var nextDiv = document.getElementById("id_q" + (currentQnum+1));
        if (selectedAnswer == correctAnswer) {
            currentDiv.hidden = true;
            nextDiv.hidden = false; 
            // if (nextDiv) { nextDiv.style.display = 'block'; }
        } else {
            alert('Incorrect answer. Please try again.');
        }
    }
</script>

<h1>Questions</h1>
<p><i>Only one answer is correct.</i></p>

<div id="question1" class="question-container">
    <strong>{{ form.q1.label }}</strong>
    {{ form.q1 }}
    <button type="button" onclick="showNextQuestion(1)">Submit</button>
</div>

<div id="question2" class="question-container" hidden>
    <strong>{{ form.q2.label }}</strong>
    {{ form.q2 }}
    <button type="button" onclick="showNextQuestion(2)">Submit</button>
</div>

<div id="question3" class="question-container" hidden>
    <strong>{{ form.q3.label }}</strong>
    {{ form.q3 }}
    <button type="button" onclick="showNextQuestion(3)">Submit</button>
</div>



<!-- {{ next_button }} -->

{{ endblock }}
